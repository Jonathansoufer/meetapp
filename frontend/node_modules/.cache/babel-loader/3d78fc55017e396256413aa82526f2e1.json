{"ast":null,"code":"import e, { createContext as t, useContext as r, useEffect as n, useState as i, useRef as a } from \"react\";\n\nfunction o(e, t) {\n  var r, n;\n  if (\"function\" == typeof t) void 0 !== (n = t(e)) && (e = n);else if (Array.isArray(t)) for (r = 0; r < t.length; r++) void 0 !== (n = t[r](e)) && (e = n);\n  return e;\n}\n\nfunction l(e, t) {\n  return \"-\" === e[0] && Array.isArray(t) && /^-\\d+$/.test(e) ? t.length + parseInt(e, 10) : e;\n}\n\nfunction u(e) {\n  return \"[object Object]\" === Object.prototype.toString.call(e);\n}\n\nfunction c(e) {\n  return Object(e) === e;\n}\n\nfunction s(e) {\n  return 0 === Object.keys(e).length;\n}\n\nfunction f(e, t) {\n  return e.indexOf(\"[\") >= 0 && (e = e.replace(/\\[/g, \".\").replace(/]/g, \"\")), e.split(t);\n}\n\nfunction p(e, t, r) {\n  if (!(this instanceof p)) return new p(e, t, r);\n  void 0 === t && (t = !1), void 0 === r && (r = !0), this.separator = e || \".\", this.override = t, this.useArray = r, this.keepArray = !1, this.cleanup = [];\n}\n\nvar h = new p(\".\", !1, !0);\n\nfunction d(e) {\n  return function () {\n    return h[e].apply(h, arguments);\n  };\n}\n\np.prototype._fill = function (e, t, r, n) {\n  var i = e.shift();\n\n  if (e.length > 0) {\n    if (t[i] = t[i] || (this.useArray && function (e) {\n      return /^\\d+$/.test(e);\n    }(e[0]) ? [] : {}), !c(t[i])) {\n      if (!this.override) {\n        if (!c(r) || !s(r)) throw new Error(\"Trying to redefine `\" + i + \"` which is a \" + typeof t[i]);\n        return;\n      }\n\n      t[i] = {};\n    }\n\n    this._fill(e, t[i], r, n);\n  } else {\n    if (!this.override && c(t[i]) && !s(t[i])) {\n      if (!c(r) || !s(r)) throw new Error(\"Trying to redefine non-empty obj['\" + i + \"']\");\n      return;\n    }\n\n    t[i] = o(r, n);\n  }\n}, p.prototype.object = function (e, t) {\n  var r = this;\n  return Object.keys(e).forEach(function (n) {\n    var i = void 0 === t ? null : t[n],\n        a = f(n, r.separator).join(r.separator);\n    -1 !== a.indexOf(r.separator) ? (r._fill(a.split(r.separator), e, e[n], i), delete e[n]) : r.override && (e[n] = o(e[n], i));\n  }), e;\n}, p.prototype.str = function (e, t, r, n) {\n  return -1 !== e.indexOf(this.separator) ? this._fill(e.split(this.separator), r, t, n) : r.hasOwnProperty(e) && !this.override || (r[e] = o(t, n)), r;\n}, p.prototype.pick = function (e, t, r) {\n  var n, i, a, o, u;\n\n  for (i = f(e, this.separator), n = 0; n < i.length; n++) {\n    if (o = l(i[n], t), !(t && \"object\" == typeof t && o in t)) return;\n    if (n === i.length - 1) return r ? (a = t[o], delete t[o], Array.isArray(t) && (u = i.slice(0, -1).join(\".\"), -1 === this.cleanup.indexOf(u) && this.cleanup.push(u)), a) : t[o];\n    t = t[o];\n  }\n\n  return r && Array.isArray(t) && (t = t.filter(function (e) {\n    return void 0 !== e;\n  })), t;\n}, p.prototype.remove = function (e, t) {\n  var r;\n\n  if (this.cleanup = [], Array.isArray(e)) {\n    for (r = 0; r < e.length; r++) this.pick(e[r], t, !0);\n\n    return this._cleanup(t), t;\n  }\n\n  return this.pick(e, t, !0);\n}, p.prototype._cleanup = function (e) {\n  var t, r, n, i;\n\n  if (this.cleanup.length) {\n    for (r = 0; r < this.cleanup.length; r++) t = (t = (i = (n = this.cleanup[r].split(\".\")).splice(0, -1).join(\".\")) ? this.pick(i, e) : e)[n[0]].filter(function (e) {\n      return void 0 !== e;\n    }), this.set(this.cleanup[r], t, e);\n\n    this.cleanup = [];\n  }\n}, p.prototype.del = p.prototype.remove, p.prototype.move = function (e, t, r, n, i) {\n  return \"function\" == typeof n || Array.isArray(n) ? this.set(t, o(this.pick(e, r, !0), n), r, i) : (i = n, this.set(t, this.pick(e, r, !0), r, i)), r;\n}, p.prototype.transfer = function (e, t, r, n, i, a) {\n  return \"function\" == typeof i || Array.isArray(i) ? this.set(t, o(this.pick(e, r, !0), i), n, a) : (a = i, this.set(t, this.pick(e, r, !0), n, a)), n;\n}, p.prototype.copy = function (e, t, r, n, i, a) {\n  return \"function\" == typeof i || Array.isArray(i) ? this.set(t, o(JSON.parse(JSON.stringify(this.pick(e, r, !1))), i), n, a) : (a = i, this.set(t, this.pick(e, r, !1), n, a)), n;\n}, p.prototype.set = function (e, t, r, n) {\n  var i, a, o, l;\n  if (void 0 === t) return r;\n\n  for (o = f(e, this.separator), i = 0; i < o.length; i++) {\n    if (l = o[i], i === o.length - 1) {\n      if (n && u(t) && u(r[l])) for (a in t) t.hasOwnProperty(a) && (r[l][a] = t[a]);else if (n && Array.isArray(r[l]) && Array.isArray(t)) for (var c = 0; c < t.length; c++) r[o[i]].push(t[c]);else r[l] = t;\n    } else r.hasOwnProperty(l) && (u(r[l]) || Array.isArray(r[l])) || (/^\\d+$/.test(o[i + 1]) ? r[l] = [] : r[l] = {});\n    r = r[l];\n  }\n\n  return r;\n}, p.prototype.transform = function (e, t, r) {\n  return t = t || {}, r = r || {}, Object.keys(e).forEach(function (n) {\n    this.set(e[n], this.pick(n, t), r);\n  }.bind(this)), r;\n}, p.prototype.dot = function (e, t, r) {\n  return t = t || {}, r = r || [], Object.keys(e).forEach(function (n) {\n    if (c(e[n]) && (u(e[n]) && !s(e[n]) || Array.isArray(e[n]) && !this.keepArray && 0 !== e[n].length)) return this.dot(e[n], t, r.concat(n));\n    t[r.concat(n).join(this.separator)] = e[n];\n  }.bind(this)), t;\n}, p.pick = d(\"pick\"), p.move = d(\"move\"), p.transfer = d(\"transfer\"), p.transform = d(\"transform\"), p.copy = d(\"copy\"), p.object = d(\"object\"), p.str = d(\"str\"), p.set = d(\"set\"), p.del = p.remove = d(\"remove\"), p.dot = d(\"dot\"), [\"override\", \"overwrite\"].forEach(function (e) {\n  Object.defineProperty(p, e, {\n    get: function () {\n      return h.override;\n    },\n    set: function (e) {\n      h.override = !!e;\n    }\n  });\n}), [\"useArray\", \"keepArray\"].forEach(function (e) {\n  Object.defineProperty(p, e, {\n    get: function () {\n      return h[e];\n    },\n    set: function (t) {\n      h[e] = t;\n    }\n  });\n}), p._process = o;\nvar y = p,\n    v = t({\n  initialData: {},\n  errors: {},\n  scopePath: \"\",\n  registerField: function () {},\n  unregisterField: function () {}\n});\n\nfunction m(e) {\n  var t = r(v),\n      i = t.initialData,\n      a = t.errors,\n      o = t.scopePath,\n      l = t.unregisterField,\n      u = t.registerField,\n      c = o ? o + \".\" + e : e;\n  n(function () {\n    return function () {\n      return l(c);\n    };\n  }, [c]);\n  var s = y.pick(c, i),\n      f = a[c];\n  return {\n    fieldName: c,\n    registerField: u,\n    defaultValue: s,\n    error: f\n  };\n}\n\nvar b = function () {\n  return (b = Object.assign || function (e) {\n    for (var t, r = 1, n = arguments.length; r < n; r++) for (var i in t = arguments[r]) Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);\n\n    return e;\n  }).apply(this, arguments);\n};\n\nfunction g(e, t) {\n  var r = {};\n\n  for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && t.indexOf(n) < 0 && (r[n] = e[n]);\n\n  if (null != e && \"function\" == typeof Object.getOwnPropertySymbols) {\n    var i = 0;\n\n    for (n = Object.getOwnPropertySymbols(e); i < n.length; i++) t.indexOf(n[i]) < 0 && (r[n[i]] = e[n[i]]);\n  }\n\n  return r;\n}\n\nfunction w(e, t) {\n  var r,\n      n,\n      i,\n      a,\n      o = {\n    label: 0,\n    sent: function () {\n      if (1 & i[0]) throw i[1];\n      return i[1];\n    },\n    trys: [],\n    ops: []\n  };\n  return a = {\n    next: l(0),\n    throw: l(1),\n    return: l(2)\n  }, \"function\" == typeof Symbol && (a[Symbol.iterator] = function () {\n    return this;\n  }), a;\n\n  function l(a) {\n    return function (l) {\n      return function (a) {\n        if (r) throw new TypeError(\"Generator is already executing.\");\n\n        for (; o;) try {\n          if (r = 1, n && (i = 2 & a[0] ? n.return : a[0] ? n.throw || ((i = n.return) && i.call(n), 0) : n.next) && !(i = i.call(n, a[1])).done) return i;\n\n          switch (n = 0, i && (a = [2 & a[0], i.value]), a[0]) {\n            case 0:\n            case 1:\n              i = a;\n              break;\n\n            case 4:\n              return o.label++, {\n                value: a[1],\n                done: !1\n              };\n\n            case 5:\n              o.label++, n = a[1], a = [0];\n              continue;\n\n            case 7:\n              a = o.ops.pop(), o.trys.pop();\n              continue;\n\n            default:\n              if (!(i = (i = o.trys).length > 0 && i[i.length - 1]) && (6 === a[0] || 2 === a[0])) {\n                o = 0;\n                continue;\n              }\n\n              if (3 === a[0] && (!i || a[1] > i[0] && a[1] < i[3])) {\n                o.label = a[1];\n                break;\n              }\n\n              if (6 === a[0] && o.label < i[1]) {\n                o.label = i[1], i = a;\n                break;\n              }\n\n              if (i && o.label < i[2]) {\n                o.label = i[2], o.ops.push(a);\n                break;\n              }\n\n              i[2] && o.ops.pop(), o.trys.pop();\n              continue;\n          }\n\n          a = t.call(e, o);\n        } catch (e) {\n          a = [6, e], n = 0;\n        } finally {\n          r = i = 0;\n        }\n\n        if (5 & a[0]) throw a[1];\n        return {\n          value: a[0] ? a[1] : void 0,\n          done: !0\n        };\n      }([a, l]);\n    };\n  }\n}\n\nfunction A(t) {\n  var r = t.initialData,\n      n = void 0 === r ? {} : r,\n      a = t.children,\n      o = t.schema,\n      l = t.context,\n      u = void 0 === l ? {} : l,\n      c = t.onSubmit,\n      s = g(t, [\"initialData\", \"children\", \"schema\", \"context\", \"onSubmit\"]),\n      f = i({}),\n      p = f[0],\n      h = f[1],\n      d = i([]),\n      m = d[0],\n      A = d[1];\n\n  function E() {\n    m.forEach(function (e) {\n      var t = e.ref,\n          r = e.path,\n          n = e.clearValue;\n      return n ? n(t) : y.set(r, \"\", t);\n    });\n  }\n\n  return e.createElement(v.Provider, {\n    value: {\n      initialData: n,\n      errors: p,\n      scopePath: \"\",\n      registerField: function (e) {\n        A(function (t) {\n          return t.concat([e]);\n        });\n      },\n      unregisterField: function (e) {\n        A(function (t) {\n          return t.filter(function (t) {\n            return t.name !== e;\n          });\n        });\n      }\n    }\n  }, e.createElement(\"form\", b({}, s, {\n    \"data-testid\": \"form\",\n    onSubmit: function (e) {\n      return t = this, r = void 0, i = function () {\n        var t, r, n;\n        return w(this, function (i) {\n          switch (i.label) {\n            case 0:\n              e.preventDefault(), t = function () {\n                var e = {};\n                return m.forEach(function (t) {\n                  var r = t.name,\n                      n = t.ref,\n                      i = t.path,\n                      a = t.parseValue,\n                      o = y.pick(i, n);\n                  e[r] = a ? a(o) : o;\n                }), y.object(e), e;\n              }(), i.label = 1;\n\n            case 1:\n              return i.trys.push([1, 4,, 5]), o ? [4, o.validate(t, {\n                abortEarly: !1,\n                stripUnknown: !0,\n                context: u\n              })] : [3, 3];\n\n            case 2:\n              i.sent(), t = o.cast(t, {\n                stripUnknown: !0,\n                context: u\n              }), i.label = 3;\n\n            case 3:\n              return h({}), c(t, {\n                resetForm: E\n              }), [3, 5];\n\n            case 4:\n              if (r = i.sent(), n = {}, !r.inner) throw r;\n              return r.inner.forEach(function (e) {\n                n[e.path] = e.message;\n              }), h(n), [3, 5];\n\n            case 5:\n              return [2];\n          }\n        });\n      }, new ((n = void 0) || (n = Promise))(function (e, a) {\n        function o(e) {\n          try {\n            u(i.next(e));\n          } catch (e) {\n            a(e);\n          }\n        }\n\n        function l(e) {\n          try {\n            u(i.throw(e));\n          } catch (e) {\n            a(e);\n          }\n        }\n\n        function u(t) {\n          t.done ? e(t.value) : new n(function (e) {\n            e(t.value);\n          }).then(o, l);\n        }\n\n        u((i = i.apply(t, r || [])).next());\n      });\n      var t, r, n, i;\n    }\n  }), a));\n}\n\nfunction E(t) {\n  var n = t.path,\n      i = t.children,\n      a = r(v),\n      o = a.scopePath,\n      l = g(a, [\"scopePath\"]);\n  return e.createElement(v.Provider, {\n    value: b({}, l, {\n      scopePath: o.concat(o ? \".\" + n : n)\n    })\n  }, i);\n}\n\nfunction k(t) {\n  var r = t.name,\n      i = t.label,\n      o = t.multiline,\n      l = void 0 !== o && o,\n      u = g(t, [\"name\", \"label\", \"multiline\"]),\n      c = a(null),\n      s = m(r),\n      f = s.fieldName,\n      p = s.registerField,\n      h = s.defaultValue,\n      d = s.error;\n  n(function () {\n    c.current && p({\n      name: f,\n      ref: c.current,\n      path: \"value\"\n    });\n  }, [c.current, f]);\n  var y = b({}, u, {\n    ref: c,\n    id: f,\n    name: f,\n    \"aria-label\": f,\n    defaultValue: h\n  });\n  return e.createElement(e.Fragment, null, i && e.createElement(\"label\", {\n    htmlFor: f\n  }, i), l ? e.createElement(\"textarea\", b({}, y)) : e.createElement(\"input\", b({}, y)), d && e.createElement(\"span\", null, d));\n}\n\nfunction O(t) {\n  return n(function () {\n    console.warn(\"Textarea will be deprecated in the next major unform release. Please use <Input multiline /> instead\");\n  }, []), e.createElement(k, b({}, t, {\n    multiline: !0\n  }));\n}\n\nfunction j(t) {\n  var r = t.name,\n      i = t.label,\n      o = t.placeholder,\n      l = t.defaultValue,\n      u = t.options,\n      c = g(t, [\"name\", \"label\", \"placeholder\", \"defaultValue\", \"options\"]),\n      s = a(null),\n      f = m(r),\n      p = f.fieldName,\n      h = f.registerField,\n      d = f.defaultValue,\n      y = f.error;\n  return n(function () {\n    s.current && h({\n      name: p,\n      ref: s.current,\n      path: \"value\"\n    });\n  }, [s.current, p]), e.createElement(e.Fragment, null, i && e.createElement(\"label\", {\n    htmlFor: p\n  }, i), e.createElement(\"select\", b({}, c, {\n    multiple: !1,\n    id: p,\n    name: p,\n    defaultValue: d || l,\n    \"aria-label\": p,\n    ref: s\n  }), e.createElement(\"option\", {\n    value: l,\n    disabled: !0,\n    hidden: !0\n  }, o), u.map(function (t) {\n    var r = t.id,\n        n = t.title;\n    return e.createElement(\"option\", {\n      key: r,\n      value: r\n    }, n);\n  })), y && e.createElement(\"span\", null, y));\n}\n\nfunction P(t) {\n  var r = t.name,\n      o = t.label,\n      l = t.onStartProgress,\n      u = g(t, [\"name\", \"label\", \"onStartProgress\"]),\n      c = a(null),\n      s = m(r),\n      f = s.fieldName,\n      p = s.registerField,\n      h = s.defaultValue,\n      d = s.error,\n      y = i(h),\n      v = y[0],\n      w = y[1];\n  n(function () {\n    c.current && p({\n      name: f,\n      ref: c.current,\n      path: \"dataset.file\",\n      clearValue: function (e) {\n        e.value = \"\", w(\"\");\n      }\n    });\n  }, [c.current, f]);\n  var A = b({}, u, {\n    ref: c,\n    id: f,\n    name: f,\n    \"aria-label\": f\n  });\n  return e.createElement(e.Fragment, null, o && e.createElement(\"label\", {\n    htmlFor: f\n  }, o), e.createElement(\"input\", b({}, A, {\n    type: \"file\",\n    onChange: function (e) {\n      var t = new FileReader();\n      t.onload = function (e) {\n        var t = e.target.result;\n        w(t);\n      }, t.onprogress = function (e) {\n        var t = e.loaded,\n            r = void 0 === t ? 0 : t,\n            n = e.total;\n        l && l(r / (void 0 === n ? 0 : n) * 100, e);\n      };\n      var r = e.target.files;\n      r && t.readAsDataURL(r[0]);\n    },\n    \"data-file\": v\n  })), d && e.createElement(\"span\", null, d));\n}\n\nj.defaultProps = {\n  placeholder: \"\",\n  defaultValue: \"\"\n};\nexport { P as FileInput, A as Form, k as Input, E as Scope, j as Select, O as Textarea, m as useField };","map":null,"metadata":{},"sourceType":"module"}