{"ast":null,"code":"import _defineProperty from \"/Users/jonathanferreira/Downloads/gostack-fullstack-meetapp-master/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/jonathanferreira/Downloads/gostack-fullstack-meetapp-master/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jonathanferreira/Downloads/gostack-fullstack-meetapp-master/frontend/src/pages/EditMeetup/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { Form, Input } from '@rocketseat/unform';\nimport * as Yup from 'yup';\nimport { MdSave, MdDeleteForever } from 'react-icons/md';\nimport { toast } from 'react-toastify';\nimport { parseISO } from 'date-fns';\nimport Loader from 'react-loader-spinner';\nimport api from \"../../services/api\";\nimport history from \"../../services/history\";\nimport BannerInput from \"../../components/BannerInput\";\nimport DatePicker from \"../../components/DatePicker\";\nimport { Container } from './styles';\nexport default function EditMeetup({\n  match\n}) {\n  const id = match.params.id;\n\n  const _useState = useState(true),\n        _useState2 = _slicedToArray(_useState, 2),\n        loading = _useState2[0],\n        setLoading = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        meetup = _useState4[0],\n        setMeetup = _useState4[1];\n\n  useEffect(() => {\n    async function loadMeetup() {\n      try {\n        const response = await api.get(\"organizers/\".concat(id));\n        setMeetup(_objectSpread({}, response.data.meetup, {\n          date: parseISO(response.data.meetup.date)\n        }));\n        setLoading(false);\n      } catch (err) {\n        toast.error('Meetup not found');\n        history.push('/');\n      }\n    }\n\n    loadMeetup();\n  }, [id]);\n\n  async function handleSubmit(data) {\n    try {\n      setLoading(true);\n      await api.put(\"meetups/\".concat(id), data);\n      toast.success('Meetup successful updated!');\n      history.push(\"/meetups/\".concat(id));\n    } catch (err) {\n      toast.error('Meetup not updated. Please try again.');\n      setLoading(false);\n    }\n  }\n\n  async function handleCancel() {\n    try {\n      await api.delete(\"meetups/\".concat(id));\n      toast.success('Meetup cancelado com sucesso!');\n      history.push('/dashboard');\n    } catch (err) {\n      toast.error('Erro ao cancelar o Meetup. Tente novamente.');\n    }\n  }\n\n  const schema = Yup.object().shape({\n    banner_id: Yup.number().transform(value => !value ? undefined : value).required('Banner is required'),\n    title: Yup.string().required('Title is required'),\n    description: Yup.string().required('Description is required'),\n    date: Yup.date().required('Date is required'),\n    location: Yup.string().required('Location is required')\n  });\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, loading ? React.createElement(\"div\", {\n    className: \"loading\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(Loader, {\n    type: \"TailSpin\",\n    color: \"#e65175\",\n    width: 32,\n    height: 32,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  })) : React.createElement(Form, {\n    schema: schema,\n    initialData: meetup,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(BannerInput, {\n    name: \"banner_id\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(Input, {\n    name: \"title\",\n    placeholder: \"Title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(Input, {\n    name: \"description\",\n    placeholder: \"Description\",\n    multiline: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), React.createElement(DatePicker, {\n    name: \"date\",\n    placeholder: \"Date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(Input, {\n    name: \"location\",\n    placeholder: \"Location\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(\"nav\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"cancel\",\n    onClick: handleCancel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(MdDeleteForever, {\n    size: 20,\n    color: \"#e65175\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), \"Cancelar Meetup\"), React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(MdSave, {\n    size: 20,\n    color: \"#fff\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }), \"Salvar\"))));\n}","map":{"version":3,"sources":["/Users/jonathanferreira/Downloads/gostack-fullstack-meetapp-master/frontend/src/pages/EditMeetup/index.js"],"names":["React","useState","useEffect","Form","Input","Yup","MdSave","MdDeleteForever","toast","parseISO","Loader","api","history","BannerInput","DatePicker","Container","EditMeetup","match","id","params","loading","setLoading","meetup","setMeetup","loadMeetup","response","get","data","date","err","error","push","handleSubmit","put","success","handleCancel","delete","schema","object","shape","banner_id","number","transform","value","undefined","required","title","string","description","location"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n\nimport { Form, Input } from '@rocketseat/unform';\nimport * as Yup from 'yup';\nimport { MdSave, MdDeleteForever } from 'react-icons/md';\nimport { toast } from 'react-toastify';\nimport { parseISO } from 'date-fns';\nimport Loader from 'react-loader-spinner';\n\nimport api from '~/services/api';\nimport history from '~/services/history';\n\nimport BannerInput from '~/components/BannerInput';\nimport DatePicker from '~/components/DatePicker';\n\nimport { Container } from './styles';\n\nexport default function EditMeetup({ match }) {\n  const { id } = match.params;\n\n  const [loading, setLoading] = useState(true);\n  const [meetup, setMeetup] = useState(null);\n\n  useEffect(() => {\n    async function loadMeetup() {\n      try {\n        const response = await api.get(`organizers/${id}`);\n        setMeetup({\n          ...response.data.meetup,\n          date: parseISO(response.data.meetup.date),\n        });\n        setLoading(false);\n      } catch (err) {\n        toast.error('Meetup not found');\n        history.push('/');\n      }\n    }\n\n    loadMeetup();\n  }, [id]);\n\n  async function handleSubmit(data) {\n    try {\n      setLoading(true);\n      await api.put(`meetups/${id}`, data);\n      toast.success('Meetup successful updated!');\n      history.push(`/meetups/${id}`);\n    } catch (err) {\n      toast.error('Meetup not updated. Please try again.');\n      setLoading(false);\n    }\n  }\n\n  async function handleCancel() {\n    try {\n      await api.delete(`meetups/${id}`);\n      toast.success('Meetup cancelado com sucesso!');\n      history.push('/dashboard');\n    } catch (err) {\n      toast.error('Erro ao cancelar o Meetup. Tente novamente.');\n    }\n  }\n\n  const schema = Yup.object().shape({\n    banner_id: Yup.number()\n      .transform(value => (!value ? undefined : value))\n      .required('Banner is required'),\n    title: Yup.string().required('Title is required'),\n    description: Yup.string().required('Description is required'),\n    date: Yup.date().required('Date is required'),\n    location: Yup.string().required('Location is required'),\n  });\n\n  return (\n    <Container>\n      {loading ? (\n        <div className=\"loading\">\n          <Loader type=\"TailSpin\" color=\"#e65175\" width={32} height={32} />\n        </div>\n      ) : (\n        <Form schema={schema} initialData={meetup} onSubmit={handleSubmit}>\n          <BannerInput name=\"banner_id\" />\n          <Input name=\"title\" placeholder=\"Title\" />\n          <Input name=\"description\" placeholder=\"Description\" multiline />\n          <DatePicker name=\"date\" placeholder=\"Date\" />\n          <Input name=\"location\" placeholder=\"Location\" />\n\n          <nav>\n            <button type=\"button\" className=\"cancel\" onClick={handleCancel}>\n              <MdDeleteForever size={20} color=\"#e65175\" />\n              Cancelar Meetup\n            </button>\n\n            <button type=\"submit\" disabled={loading}>\n              <MdSave size={20} color=\"#fff\" />\n              Salvar\n            </button>\n          </nav>\n        </Form>\n      )}\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}